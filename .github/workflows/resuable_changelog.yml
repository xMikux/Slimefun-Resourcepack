name: Resuable | ChangeLog Generator

on:
  workflow_call:
    inputs:
      this_version:
        type: string
        required: true
      next_version:
        type: string
        required: true
    outputs:
      changelog:
        description: "Changelog markdown"
        value: ${{ jobs.changelog_generate.outputs.changelog }}

jobs:
  changelog_generate:
    name: Generate Changelog
    runs-on: ubuntu-latest
    outputs:
      changelog: ${{ steps.changelog.outputs.changes }}
    steps:
      # -
      #   name: GitHub - Create Draft Release
      #   uses: ncipollo/release-action@v1.14.0
      #   with:
      #     prerelease: true
      #     draft: false
      #     commit: ${{ github.sha }}
      #     tag: ${{ inputs.next_version }}
      #     name: ${{ inputs.next_version }}
      #     body: "*pending*"
      -
        name: Changelog - Generate Changelog
        id: changelog
        uses: requarks/changelog-action@v1
        with:
          token: ${{ github.token }}
          writeToFile: false
          # tag: ${{ inputs.next_version }}
          fromTag: ${{ inputs.this_version }}
          toTag: ${{ inputs.next_version }}
